# 鉱石採掘ゲーム 🪨⛏️　
 Minecraft Java版で利用できる、スコアアタック型 鉱石採掘ミニゲームのプラグインです。  
 <br/>  
 
## 💫 はじめに
このリポジトリは、Java学習者である「なぴ（Xアカウント：[@nap_7878](https://x.com/nap_7878) ）」が作成した  
Minecraftプラグイン『OreHunter（鉱石採掘ミニゲーム）』に関するものです。  
デイトラ Javaコースで学んだ内容を活かして開発しました。 

※ ご利用に関するトラブル等につきましては、一切の責任を負いかねますことを予めご了承ください。  
※ Xの仕様により、未ログインの状態ですと投稿が表示されない場合があります。  
<br/> 

---

## 🗝️ ゲーム概要
次々と出現する鉱石を、20秒の制限時間内に採掘して高得点を目指すゲームです。  
鉱石の種類によって獲得ポイントが異なり、石はマイナスポイントなので採掘時には注意しましょう。

進行方向に鉱石が突如出現し、行く手を阻むこともあります。  
そんな時は、「採掘するか・回避するか」プレイヤーの瞬発力が試されます。

どんな時でも、鉱石を素早く見極める力が高得点への鍵となります。

ゲーム終了後のスコアはデータベースに保存され、いつでもスコア履歴を確認することができます。  

※このゲームは、シングルプレイ用として作成しています。  
<br/>  

---

## 🎮 ゲーム詳細
### ◇ ゲーム開始の準備  
１. コマンドで`/orehunter`と入力し、エンターキーを押します。
- プレイヤーの体力と空腹度は最大値に設定され、採掘道具(ツルハシ)が装備されます。
- ゲーム開始までのカウントダウンが始まり、「5 , 4 , 3 , 2 , 1 , START！」と表示されます。

　※ 広いスペースでのコマンド実行を推奨します。  
　※ メインハンドのアイテムは上書きされますので、何も持たない状態でのコマンド実行を推奨します。  
　<br/> 
 
 ### ◇ ゲーム開始
１. 20秒間のゲームが開始します。  
<br/>  

２. 出現する鉱石を採掘します。
- 鉱石は、1秒毎に2個ずつランダムで出現し、種類によって獲得ポイントが異なります。( 詳細は、［鉱石別 得点一覧］をご参照下さい )
- 出現場所は、プレイヤーを中心とした約20✖️20ブロックの範囲にランダムで出現します。
- 採掘方法は、ツルハシで1回叩くだけで採掘可能です。
- 採掘時には、ポイントが即時加算され、採掘した鉱石に応じて「 鉱石名 , 獲得ポイント , 合計スコア 」が表示されます。
<br/>  

３. ゲーム終了 5秒前からカウントダウンが始まり、「5 , 4 , 3 , 2 , 1 , ゲーム終了！」と表示されます。  
<br/>

### ◇ ゲーム終了後
１. スコアが表示され、周囲のブロック状態は元の状態に戻されます。  
- 出現した鉱石はエリア内から消え、誤って破壊してしまった地形ブロックなどは復元されます。

　※ プレイヤーが、復元対象のブロックと同じ位置にいた場合、復元と同時に地中に埋まってしまう可能性がありますのでご注意ください。  
　<br/> 
 
２. スコアはデータベースに保存されます。
- コマンドで`/orehunter list`と入力することで確認できます。

　※ 誤ったコマンド引数を入力した場合、「 実行できません。コマンド引数を正しく入力する必要があります。[list] 」と表示されます。    
<br/>   

---

##  📝 工夫した点
#### ◇ カウントダウンの演出 
- ゲーム開始時と終了時に５秒間のカウントダウンを表示することで、ゲームのタイミングを把握できるようにしました。

#### ◇ 鉱石の出現パターンと得点設定
- ランダム配置で時間の経過と共に次々と出現させることで、「反射神経✖️判断力」が求められるスピード感を重視したゲームにしました。
- 鉱石の中に、ナイナスポイントの「石」を混在させることで、プレイヤーのスコアを左右するようゲーム性をもたせました。

#### ◇ ブロック復元処理 
- 鉱石が出現した場所や、採掘時に誤って破壊してしまったブロックの元の状態を記録しておき、ゲーム終了後に自動で復元される仕組みにしました。
- プレイヤーは、地形や建物を破壊してしまっても心配することなく、好きな場所でゲームを楽しむことができます。
  
#### ◇ 採掘方法の設定 
- 出現した鉱石は、1回叩くだけで採掘できるように設定し、次々と出現する鉱石をテンポよく採掘できるようにしました。
<br/>   

---


## 📖 コマンド一覧
|コマンド|詳細|
|---|---|
|`/orehunter`|ゲーム開始|
|`/orehunter list`|プレイヤーのスコア履歴表示|  
<br/>   

---

## 💎 鉱石別 得点一覧
|鉱石名|ポイント|
|---|---|
|ダイヤモンド鉱石|100 ポイント|
|ラピスラズリ鉱石|50 ポイント|
|レッドストーン鉱石|30 ポイント|
|鉄鉱石|10 ポイント|
|石|-50 ポイント|  
<br/>   

---

## 🤖 データベースについて
### ◇ データベースの接続方法
１. ご自身のローカル環境でMySQLに接続してください。  
２. 以下のSQLコマンドを順番に実行してください。  
<br/>  

① データベース作成
```
CREATE DATABASE orehunter_game;
```  
② データベース選択
```
USE orehunter_game;
```
③ テーブル作成（Mac か Windows どちらか一方を実行してください）  

######  ＊　Macの場合
```
CREATE TABLE player_score(id int auto_increment, player_name varchar(100), score int, registered_at datetime, primary key(id));
```  
######  ＊　Windowsの場合
```
CREATE TABLE player_score(id int auto_increment, player_name varchar(100), score int, registered_at datetime, primary key(id)) DEFAULT CHARSET=utf8;
```
<br/>  
３. MySQLの接続情報（ url , username , password ）は、ご自身のローカル環境に合わせて「 mybatis-config.xml 」に設定してください。  
<br/>  
<br/>  
<br/>  

### ◇ データベースの構成
データベース名：orehunter_game  
テーブル名　　：player_score  
|カラム名|詳細|
|---|---|
|id|主キー（AUTO_INCREMENT）|
|player_name|プレイヤー名|
|score|ゲームでの獲得スコア|
|registered_at|登録日時|  
<br/>   

---

## ⚙️ 開発環境
- Java版 Minecraft　1.21.5
- Java　21.0.7
- Spigot　1.21.5  
<br/>   

---

## 🍀 おわりに  
このプラグインは、Javaのオブジェクト指向・データベース連携・イベント処理・コードの可読性など、学んだ内容を意識し開発しました。  
学習からプラグイン開発を通し、設計・実装・改善を繰り返しながらコードを組み立て、必要な情報を調べながら進めることができたと感じています。 

引き続き学習を継続しながら知識を深め、より良いコードを書けるよう努めて参ります。  

また、ご意見やお気づきの点がございましたら、お手数ですが Xアカウント（[@nap_7878](https://x.com/nap_7878)）までご連絡いただけましたら幸いです。  

最後までご覧いただきありがとうございました。  







 

  



